!function(){"use strict";var e;function t(e){let t,n=!1,r=null;return Object.assign(((...o)=>{t=o,r?n=!0:(e(...t),r=requestAnimationFrame((()=>{r=null,n&&(e(...t),n=!1)})))}),{cancel:()=>{cancelAnimationFrame(r),n=!1,r=null}})}function n(e,t){if(function(e){return null!=e.length}(e))for(let n=0,r=e.length;n<r;n++)t(e[n]);else for(const n of e)t(n)}function r(e,t){n(t,(t=>e.push(t)))}function o(e){let t=0;return e.seconds&&(t+=1e3*e.seconds),e.minutes&&(t+=60*e.minutes*1e3),e.hours&&(t+=60*e.hours*60*1e3),e.days&&(t+=24*e.days*60*60*1e3),t}function a({selectNode:e,createNode:t,updateNode:n,selectTarget:r,createTarget:o,isTargetMutation:a}){const s=r();if(s){const r=e();r?n(r):t(s)}else{const n=new MutationObserver((n=>{if(n.find(a)){i();const n=r();e()||t(n)}})),s=()=>{if("complete"!==document.readyState)return;i();const n=r()||o();e()||t(n)},i=()=>{document.removeEventListener("readystatechange",s),n.disconnect()};"complete"===document.readyState?s():(document.addEventListener("readystatechange",s),n.observe(document,{childList:!0,subtree:!0}))}}function s(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function i(e,n,r=Function.prototype){const a=o({seconds:2}),s=o({seconds:10}),i=e.previousSibling;let c=e.parentNode;if(!c)throw new Error("Unable to watch for node position: parent element not found");if("prev-sibling"===n&&!i)throw new Error("Unable to watch for node position: there is no previous sibling");let l=0,u=null,d=null;const h=t((()=>{if(d)return;l++;const t=Date.now();if(null==u)u=t;else if(l>=10){if(t-u<s)return void(d=setTimeout((()=>{u=null,l=0,d=null,h()}),a));u=t,l=1}if("parent"===n&&i&&i.parentNode!==c)p();else{if("prev-sibling"===n){if(null==i.parentNode)return void p();i.parentNode!==c&&g(i.parentNode)}c.insertBefore(e,i?i.nextSibling:c.firstChild),f.takeRecords(),r&&r()}})),f=new MutationObserver((()=>{("parent"===n&&e.parentNode!==c||"prev-sibling"===n&&e.previousSibling!==i)&&h()})),m=()=>{f.observe(c,{childList:!0})},p=()=>{clearTimeout(d),f.disconnect(),h.cancel()},g=e=>{c=e,p(),m()};return m(),{run:m,stop:p,skip:()=>{f.takeRecords()}}}function c(e,t){if(null==e)return;const n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>null==e.shadowRoot?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT});for(let r=e.shadowRoot?n.currentNode:n.nextNode();null!=r;r=n.nextNode())r.classList.contains("surfingkeys_hints_host")||(t(r),c(r.shadowRoot,t))}!function(e){e.UI_GET_DATA="ui-get-data",e.UI_SUBSCRIBE_TO_CHANGES="ui-subscribe-to-changes",e.UI_UNSUBSCRIBE_FROM_CHANGES="ui-unsubscribe-from-changes",e.UI_CHANGE_SETTINGS="ui-change-settings",e.UI_SET_THEME="ui-set-theme",e.UI_SET_SHORTCUT="ui-set-shortcut",e.UI_TOGGLE_ACTIVE_TAB="ui-toggle-active-tab",e.UI_MARK_NEWS_AS_READ="ui-mark-news-as-read",e.UI_MARK_NEWS_AS_DISPLAYED="ui-mark-news-as-displayed",e.UI_LOAD_CONFIG="ui-load-config",e.UI_APPLY_DEV_DYNAMIC_THEME_FIXES="ui-apply-dev-dynamic-theme-fixes",e.UI_RESET_DEV_DYNAMIC_THEME_FIXES="ui-reset-dev-dynamic-theme-fixes",e.UI_APPLY_DEV_INVERSION_FIXES="ui-apply-dev-inversion-fixes",e.UI_RESET_DEV_INVERSION_FIXES="ui-reset-dev-inversion-fixes",e.UI_APPLY_DEV_STATIC_THEMES="ui-apply-dev-static-themes",e.UI_RESET_DEV_STATIC_THEMES="ui-reset-dev-static-themes",e.UI_SAVE_FILE="ui-save-file",e.UI_REQUEST_EXPORT_CSS="ui-request-export-css",e.UI_COLOR_SCHEME_CHANGE="ui-color-scheme-change",e.BG_CHANGES="bg-changes",e.BG_ADD_CSS_FILTER="bg-add-css-filter",e.BG_ADD_STATIC_THEME="bg-add-static-theme",e.BG_ADD_SVG_FILTER="bg-add-svg-filter",e.BG_ADD_DYNAMIC_THEME="bg-add-dynamic-theme",e.BG_EXPORT_CSS="bg-export-css",e.BG_UNSUPPORTED_SENDER="bg-unsupported-sender",e.BG_CLEAN_UP="bg-clean-up",e.BG_RELOAD="bg-reload",e.BG_FETCH_RESPONSE="bg-fetch-response",e.BG_UI_UPDATE="bg-ui-update",e.BG_CSS_UPDATE="bg-css-update",e.CS_COLOR_SCHEME_CHANGE="cs-color-scheme-change",e.CS_FRAME_CONNECT="cs-frame-connect",e.CS_FRAME_FORGET="cs-frame-forget",e.CS_FRAME_FREEZE="cs-frame-freeze",e.CS_FRAME_RESUME="cs-frame-resume",e.CS_EXPORT_CSS_RESPONSE="cs-export-css-response",e.CS_FETCH="cs-fetch",e.CS_DARK_THEME_DETECTED="cs-dark-theme-detected",e.CS_DARK_THEME_NOT_DETECTED="cs-dark-theme-not-detected",e.CS_LOG="cs-log"}(e||(e={}));let l=()=>"complete"===document.readyState||"interactive"===document.readyState;const u=new Set;function d(e){l()?e():u.add(e)}function h(e){u.delete(e)}function f(){return"complete"===document.readyState}const m=new Set;function p(e){f()?e():m.add(e)}if(!l()){const e=()=>{l()&&(u.forEach((e=>e())),u.clear(),f()&&(document.removeEventListener("readystatechange",e),m.forEach((e=>e())),m.clear()))};document.addEventListener("readystatechange",e)}const g=new Map,b=new WeakMap;function y(e,t){let r,o,a;if(g.has(e))r=g.get(e),o=b.get(r);else{let t=!1,s=!1;r=new MutationObserver((r=>{if(function(e){if(e.length>1e3)return!0;let t=0;for(let n=0;n<e.length;n++)if(t+=e[n].addedNodes.length,t>1e3)return!0;return!1}(r))!t||l()?o.forEach((({onHugeMutations:t})=>t(e))):s||(a=()=>o.forEach((({onHugeMutations:t})=>t(e))),d(a),s=!0),t=!0;else{const e=function(e){const t=new Set,r=new Set,o=new Set;e.forEach((e=>{n(e.addedNodes,(e=>{e instanceof Element&&e.isConnected&&t.add(e)})),n(e.removedNodes,(e=>{e instanceof Element&&(e.isConnected?(o.add(e),t.delete(e)):r.add(e))}))}));const a=[],s=[];return t.forEach((e=>{t.has(e.parentElement)&&a.push(e)})),r.forEach((e=>{r.has(e.parentElement)&&s.push(e)})),a.forEach((e=>t.delete(e))),s.forEach((e=>r.delete(e))),{additions:t,moves:o,deletions:r}}(r);o.forEach((({onMinorMutations:t})=>t(e)))}})),r.observe(e,{childList:!0,subtree:!0}),g.set(e,r),o=new Set,b.set(r,o)}return o.add(t),{disconnect(){o.delete(t),a&&h(a),0===o.size&&(r.disconnect(),b.delete(r),g.delete(e))}}}function k(e,t){a({selectNode:()=>document.getElementById("dark-reader-style"),createNode:n=>{document.documentElement.setAttribute("data-darkreader-mode",t);const r=document.createElement("style");r.id="dark-reader-style",r.classList.add("darkreader"),r.type="text/css",r.textContent=e,n.appendChild(r)},updateNode:t=>{e.replace(/^\s+/gm,"")!==t.textContent.replace(/^\s+/gm,"")&&(t.textContent=e)},selectTarget:()=>document.head,createTarget:()=>{const e=document.createElement("head");return document.documentElement.insertBefore(e,document.documentElement.firstElementChild),e},isTargetMutation:e=>"head"===e.target.nodeName.toLowerCase()})}function E(){s(document.getElementById("dark-reader-style")),document.documentElement.removeAttribute("data-darkreader-mode")}function S(){s(document.getElementById("dark-reader-svg"))}function w(e){const t=[],n=[];let r;for(let o=0,a=e.length;o<a;o++){const a=e[o];if(a&&" "!==a){if(C.has(a)){const e=C.get(a);for(;n.length;){const r=C.get(n[0]);if(!r)break;if(!e.lessOrEqualThan(r))break;t.push(n.shift())}n.unshift(a)}else!r||C.has(r)?t.push(a):t[t.length-1]+=a;r=a}}t.push(...n);const o=[];for(let e=0,n=t.length;e<n;e++){const n=C.get(t[e]);if(n){const e=o.splice(0,2);o.push(n.exec(e[1],e[0]))}else o.unshift(parseFloat(t[e]))}return o[0]}class v{constructor(e,t){this.precendce=e,this.execMethod=t}exec(e,t){return this.execMethod(e,t)}lessOrEqualThan(e){return this.precendce<=e.precendce}}const C=new Map([["+",new v(1,((e,t)=>e+t))],["-",new v(1,((e,t)=>e-t))],["*",new v(2,((e,t)=>e*t))],["/",new v(2,((e,t)=>e/t))]]);function T(e,t,n=0){const r=[];let o;for(;o=e.exec(t);)r.push(o[n]);return r}function _(e,t=0){const n=e.length;let r=0,o=-1;for(let a=t;a<n;a++)if(0===r){const t=e.indexOf("(",a);if(t<0)break;o=t,r++,a=t}else{const t=e.indexOf(")",a);if(t<0)break;const n=e.indexOf("(",a);if(n<0||t<n){if(r--,0===r)return{start:o,end:t+1};a=t}else r++,a=n}return null}const A=new Map,x=new Map;function $(e){if(e=e.trim(),x.has(e))return x.get(e);e.includes("calc(")&&(e=function(e){let t=0;const n=(t,n,r)=>{e=e.substring(0,t)+r+e.substring(n)};for(;-1!==(t=e.indexOf("calc("));){const r=_(e,t);if(!r)break;let o=e.slice(r.start+1,r.end-1);const a=o.includes("%");o=o.split("%").join("");const s=Math.round(w(o));n(r.start-4,r.end,s+(a?"%":""))}return e}(e));const t=function(e){const t=e.trim().toLowerCase();if(t.match(I))return function(e){const[t,n,r,o=1]=F(e,B,O);return{r:t,g:n,b:r,a:o}}(t);if(t.match(N))return function(e){const[t,n,r,o=1]=F(e,q,G);return M({h:t,s:n,l:r,a:o})}(t);if(t.match(P))return function(e){const t=e.substring(1);switch(t.length){case 3:case 4:{const[e,n,r]=[0,1,2].map((e=>parseInt(`${t[e]}${t[e]}`,16)));return{r:e,g:n,b:r,a:3===t.length?1:parseInt(`${t[3]}${t[3]}`,16)/255}}case 6:case 8:{const[e,n,r]=[0,2,4].map((e=>parseInt(t.substring(e,e+2),16)));return{r:e,g:n,b:r,a:6===t.length?1:parseInt(t.substring(6,8),16)/255}}}return null}(t);if(U.has(t))return function(e){const t=U.get(e);return{r:t>>16&255,g:t>>8&255,b:t>>0&255,a:1}}(t);if(W.has(t))return function(e){const t=W.get(e);return{r:t>>16&255,g:t>>8&255,b:t>>0&255,a:1}}(t);if("transparent"===e)return{r:0,g:0,b:0,a:0};return null}(e);return t&&x.set(e,t),t}function V(e){if(A.has(e))return A.get(e);const t=$(e);if(!t)return null;const n=R(t);return A.set(e,n),n}function M({h:e,s:t,l:n,a:r=1}){if(0===t){const[e,t,o]=[n,n,n].map((e=>Math.round(255*e)));return{r:e,g:o,b:t,a:r}}const o=(1-Math.abs(2*n-1))*t,a=o*(1-Math.abs(e/60%2-1)),s=n-o/2,[i,c,l]=(e<60?[o,a,0]:e<120?[a,o,0]:e<180?[0,o,a]:e<240?[0,a,o]:e<300?[a,0,o]:[o,0,a]).map((e=>Math.round(255*(e+s))));return{r:i,g:c,b:l,a:r}}function R({r:e,g:t,b:n,a:r=1}){const o=e/255,a=t/255,s=n/255,i=Math.max(o,a,s),c=Math.min(o,a,s),l=i-c,u=(i+c)/2;if(0===l)return{h:0,s:0,l:u,a:r};let d=60*(i===o?(a-s)/l%6:i===a?(s-o)/l+2:(o-a)/l+4);d<0&&(d+=360);return{h:d,s:l/(1-Math.abs(2*u-1)),l:u,a:r}}function L(e,t=0){const n=e.toFixed(t);if(0===t)return n;const r=n.indexOf(".");if(r>=0){const e=n.match(/0+$/);if(e)return e.index===r+1?n.substring(0,r):n.substring(0,e.index)}return n}function D(e){const{h:t,s:n,l:r,a:o}=e;return null!=o&&o<1?`hsla(${L(t)}, ${L(100*n)}%, ${L(100*r)}%, ${L(o,2)})`:`hsl(${L(t)}, ${L(100*n)}%, ${L(100*r)}%)`}const I=/^rgba?\([^\(\)]+\)$/,N=/^hsla?\([^\(\)]+\)$/,P=/^#[0-9a-f]+$/i;function F(e,t,n){const r=function(e){const t=[];let n=0,r=!1;const o=e.indexOf("(");e=e.substring(o+1,e.length-1);for(let o=0;o<e.length;o++){const a=e[o];a>="0"&&a<="9"||"."===a||"+"===a||"-"===a?r=!0:!r||" "!==a&&","!==a?r||(n=o+1):(t.push(e.substring(n,o)),r=!1,n=o+1)}return r&&t.push(e.substring(n,e.length)),t}(e),o=Object.entries(n);return r.map((e=>e.trim())).map(((e,n)=>{let r;const a=o.find((([t])=>e.endsWith(t)));return r=a?parseFloat(e.substring(0,e.length-a[0].length))/a[1]*t[n]:parseFloat(e),t[n]>1?Math.round(r):r}))}const B=[255,255,255,1],O={"%":100};const q=[360,1,1,1],G={"%":100,deg:360,rad:2*Math.PI,turn:1};const U=new Map(Object.entries({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074})),W=new Map(Object.entries({ActiveBorder:3906044,ActiveCaption:0,AppWorkspace:11184810,Background:6513614,ButtonFace:16777215,ButtonHighlight:15329769,ButtonShadow:10461343,ButtonText:0,CaptionText:0,GrayText:8355711,Highlight:11720703,HighlightText:0,InactiveBorder:16777215,InactiveCaption:16777215,InactiveCaptionText:0,InfoBackground:16514245,InfoText:0,Menu:16185078,MenuText:16777215,Scrollbar:11184810,ThreeDDarkShadow:0,ThreeDFace:12632256,ThreeDHighlight:16777215,ThreeDLightShadow:16777215,ThreeDShadow:0,Window:15527148,WindowFrame:11184810,WindowText:0,"-webkit-focus-ring-color":15046400}).map((([e,t])=>[e.toLowerCase(),t])));function H(e,t,n){return(.2126*e+.7152*t+.0722*n)/255}function j(e){e(function(){const e=document.querySelectorAll(".darkreader");e.forEach((e=>e.disabled=!0));const t=$(getComputedStyle(document.documentElement).backgroundColor),n=document.body?$(getComputedStyle(document.body).backgroundColor):{r:0,g:0,b:0,a:0},r=1-t.a+t.a*H(t.r,t.g,t.b),o=(1-n.a)*r+n.a*H(n.r,n.g,n.b)<.5;return e.forEach((e=>e.disabled=!1)),o}())}function z(){if(document.documentElement.style.backgroundColor||document.body&&document.body.style.backgroundColor)return!0;for(const e of document.styleSheets)if(e&&e.ownerNode&&!e.ownerNode.classList.contains("darkreader"))return!0;return!1}let Q,K;function X(e){Y(),document.body&&z()?j(e):(Q=new MutationObserver((()=>{document.body&&z()&&(Y(),j(e))})),Q.observe(document.documentElement,{childList:!0}),"complete"!==document.readyState&&(K=()=>{"complete"===document.readyState&&(Y(),j(e))},document.addEventListener("readystatechange",K)))}function Y(){Q&&(Q.disconnect(),Q=null),K&&(document.removeEventListener("readystatechange",K),K=null)}const Z="undefined"!=typeof navigator,J=Z?navigator.userAgentData&&Array.isArray(navigator.userAgentData.brands)?navigator.userAgentData.brands.map((e=>`${e.brand.toLowerCase()} ${e.version}`)).join(" "):navigator.userAgent.toLowerCase():"some useragent",ee=Z?navigator.userAgentData&&"string"==typeof navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase():navigator.platform.toLowerCase():"some platform",te=J.includes("thunderbird"),ne=J.includes("firefox")||J.includes("librewolf")||te;J.includes("vivaldi"),J.includes("yabrowser"),J.includes("opr")||J.includes("opera"),J.includes("edg");ee.startsWith("win"),ee.startsWith("mac"),Z&&navigator.userAgentData?navigator.userAgentData.mobile:J.includes("mobile");const re="function"==typeof ShadowRoot,oe="function"==typeof MediaQueryList&&"function"==typeof MediaQueryList.prototype.addEventListener;(()=>{const e=J.match(/chrom(?:e|ium)(?:\/| )([^ ]+)/);e&&e[1]&&e[1]})(),(()=>{const e=J.match(/(?:firefox|librewolf)(?:\/| )([^ ]+)/);e&&e[1]&&e[1]})();const ae=(()=>{try{return document.querySelector(":defined"),!0}catch(e){return!1}})(),se=(()=>{if("undefined"==typeof document)return!1;const e=document.createElement("div");return e.setAttribute("style","color-scheme: dark"),e.style&&"dark"===e.style.colorScheme})();let ie;const ce=new Map;function le(e){return ie||(ie=document.createElement("a")),ie.href=e,ie.href}function ue(e,t=null){const n=`${e}${t?`;${t}`:""}`;if(ce.has(n))return ce.get(n);if(t){const r=new URL(e,le(t));return ce.set(n,r),r}const r=new URL(le(e));return ce.set(e,r),r}function de(e,t){if(t.match(/^data\\?\:/))return t;if(/^\/\//.test(t))return`${location.protocol}${t}`;const n=ue(e);return ue(t,n.href).href}function he(e,t,r){n(e,(e=>{if(e.selectorText)t(e);else if(e.href)try{he(e.styleSheet.cssRules,t,r)}catch(e){r&&r()}else if(e.media){const n=Array.from(e.media),o=n.some((e=>e.startsWith("screen")||e.startsWith("all")||e.startsWith("("))),a=n.some((e=>e.startsWith("print")||e.startsWith("speech")));!o&&a||he(e.cssRules,t,r)}else e.conditionText&&CSS.supports(e.conditionText)&&he(e.cssRules,t,r)}))}const fe=["background","border","border-color","border-bottom","border-left","border-right","border-top","outline","outline-color"];function me(e,t){n(e,(n=>{const r=e.getPropertyValue(n).trim();r&&t(n,r)}));e.cssText.includes("var(")&&fe.forEach((n=>{const r=e.getPropertyValue(n);r&&r.includes("var(")&&t(n,r)}))}const pe=/url\((('.*?')|(".*?")|([^\)]*?))\)/g,ge=/@import\s*(url\()?(('.+?')|(".+?")|([^\)]*?))\)? ?(screen)?;?/gi;function be(e){return e.trim().replace(/[\n\r\\]+/g,"").replace(/^url\((.*)\)$/,"$1").trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1").replace(/(?:\\(.))/g,"$1")}function ye(e){const t=ue(e);return`${t.origin}${t.pathname.replace(/\?.*$/,"").replace(/(\/)([^\/]+)$/i,"$1")}`}const ke=/\/\*[\s\S]*?\*\//g;const Ee=/@font-face\s*{[^}]*}/g;function Se(e,t,n,r,o){return(e-t)*(o-r)/(n-t)+r}function we(e,t,n){return Math.min(n,Math.max(t,e))}function ve(e,t){const n=[];for(let r=0,o=e.length;r<o;r++){n[r]=[];for(let o=0,a=t[0].length;o<a;o++){let a=0;for(let n=0,s=e[0].length;n<s;n++)a+=e[r][n]*t[n][o];n[r][o]=a}}return n}function Ce(e){let t=Te.identity();return 0!==e.sepia&&(t=ve(t,Te.sepia(e.sepia/100))),0!==e.grayscale&&(t=ve(t,Te.grayscale(e.grayscale/100))),100!==e.contrast&&(t=ve(t,Te.contrast(e.contrast/100))),100!==e.brightness&&(t=ve(t,Te.brightness(e.brightness/100))),1===e.mode&&(t=ve(t,Te.invertNHue())),t}const Te={identity:()=>[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],invertNHue:()=>[[.333,-.667,-.667,0,1],[-.667,.333,-.667,0,1],[-.667,-.667,.333,0,1],[0,0,0,1,0],[0,0,0,0,1]],brightness:e=>[[e,0,0,0,0],[0,e,0,0,0],[0,0,e,0,0],[0,0,0,1,0],[0,0,0,0,1]],contrast(e){const t=(1-e)/2;return[[e,0,0,0,t],[0,e,0,0,t],[0,0,e,0,t],[0,0,0,1,0],[0,0,0,0,1]]},sepia:e=>[[.393+.607*(1-e),.769-.769*(1-e),.189-.189*(1-e),0,0],[.349-.349*(1-e),.686+.314*(1-e),.168-.168*(1-e),0,0],[.272-.272*(1-e),.534-.534*(1-e),.131+.869*(1-e),0,0],[0,0,0,1,0],[0,0,0,0,1]],grayscale:e=>[[.2126+.7874*(1-e),.7152-.7152*(1-e),.0722-.0722*(1-e),0,0],[.2126-.2126*(1-e),.7152+.2848*(1-e),.0722-.0722*(1-e),0,0],[.2126-.2126*(1-e),.7152-.7152*(1-e),.0722+.9278*(1-e),0,0],[0,0,0,1,0],[0,0,0,0,1]]};function _e(e){return e[1===e.mode?"darkSchemeBackgroundColor":"lightSchemeBackgroundColor"]}function Ae(e){return e[1===e.mode?"darkSchemeTextColor":"lightSchemeTextColor"]}const xe=new Map;const $e=["r","g","b","a"],Ve=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function Me(e,t,n,r,o){let a;xe.has(n)?a=xe.get(n):(a=new Map,xe.set(n,a));const s=function(e,t){let n="";return $e.forEach((t=>{n+=`${e[t]};`})),Ve.forEach((e=>{n+=`${t[e]};`})),n}(e,t);if(a.has(s))return a.get(s);const i=n(R(e),null==r?null:V(r),null==o?null:V(o)),{r:c,g:l,b:u,a:d}=M(i),h=Ce(t),[f,m,p]=function([e,t,n],r){const o=ve(r,[[e/255],[t/255],[n/255],[1],[1]]);return[0,1,2].map((e=>we(Math.round(255*o[e][0]),0,255)))}([c,l,u],h),g=1===d?function({r:e,g:t,b:n,a:r}){return`#${(null!=r&&r<1?[e,t,n,Math.round(255*r)]:[e,t,n]).map((e=>`${e<16?"0":""}${e.toString(16)}`)).join("")}`}({r:f,g:m,b:p}):function(e){const{r:t,g:n,b:r,a:o}=e;return null!=o&&o<1?`rgba(${L(t)}, ${L(n)}, ${L(r)}, ${L(o,2)})`:`rgb(${L(t)}, ${L(n)}, ${L(r)})`}({r:f,g:m,b:p,a:d});return a.set(s,g),g}function Re(e){return e}function Le(e,t){const n=_e(t);return Me(e,t,De,Ae(t),n)}function De({h:e,s:t,l:n,a:r},o,a){const s=n<.5;let i;if(s)i=n<.2||t<.12;else{const r=e>200&&e<280;i=t<.24||n>.8&&r}let c=e,l=n;i&&(s?(c=o.h,l=o.s):(c=a.h,l=a.s));return{h:c,s:l,l:Se(n,0,1,o.l,a.l),a:r}}function Ie({h:e,s:t,l:n,a:r},o){const a=t<.12||n>.8&&(e>200&&e<280);if(n<.5){const s=Se(n,0,.5,0,.4);if(a){return{h:o.h,s:o.s,l:s,a:r}}return{h:e,s:t,l:s,a:r}}let s=Se(n,.5,1,.4,o.l);if(a){return{h:o.h,s:o.s,l:s,a:r}}let i=e;if(e>60&&e<180){i=e>120?Se(e,120,180,135,180):Se(e,60,120,60,105)}return i>40&&i<80&&(s*=.75),{h:i,s:t,l:s,a:r}}function Ne(e,t){if(0===t.mode)return Le(e,t);const n=_e(t);return Me(e,{...t,mode:0},Ie,n)}const Pe=.55;function Fe(e){return Se(e,205,245,205,220)}function Be({h:e,s:t,l:n,a:r},o){const a=n<.2||t<.24,s=!a&&e>205&&e<245;if(n>.5){const i=Se(n,.5,1,Pe,o.l);if(a){return{h:o.h,s:o.s,l:i,a:r}}let c=e;return s&&(c=Fe(e)),{h:c,s:t,l:i,a:r}}if(a){return{h:o.h,s:o.s,l:Se(n,0,.5,o.l,Pe),a:r}}let i,c=e;return s?(c=Fe(e),i=Se(n,0,.5,o.l,Math.min(1,.6000000000000001))):i=Se(n,0,.5,o.l,Pe),{h:c,s:t,l:i,a:r}}function Oe(e,t){if(0===t.mode)return Le(e,t);const n=Ae(t);return Me(e,{...t,mode:0},Be,n)}function qe({h:e,s:t,l:n,a:r},o,a){let s=e,i=t;(n<.2||t<.24)&&(n<.5?(s=o.h,i=o.s):(s=a.h,i=a.s));return{h:s,s:i,l:Se(n,0,1,.5,.2),a:r}}function Ge(e,t){if(0===t.mode)return Le(e,t);const n=Ae(t),r=_e(t);return Me(e,{...t,mode:0},qe,n,r)}function Ue(e,t){return Ne(e,t)}var We;function He(e){const t=[];return e.mode===We.dark&&t.push("invert(100%) hue-rotate(180deg)"),100!==e.brightness&&t.push(`brightness(${e.brightness}%)`),100!==e.contrast&&t.push(`contrast(${e.contrast}%)`),0!==e.grayscale&&t.push(`grayscale(${e.grayscale}%)`),0!==e.sepia&&t.push(`sepia(${e.sepia}%)`),0===t.length?null:t.join(" ")}!function(e){e[e.light=0]="light",e[e.dark=1]="dark"}(We||(We={}));let je=0;const ze=new Map,Qe=new Map;async function Ke(t){return new Promise(((n,r)=>{const o=++je;ze.set(o,n),Qe.set(o,r),chrome.runtime.sendMessage({type:e.CS_FETCH,data:t,id:o})}))}async function Xe(e,t){const n=await async function(e,t,n){const r=await fetch(e,{cache:"force-cache",credentials:"omit",referrer:n});if(ne&&"text/css"===t&&e.startsWith("moz-extension://")&&e.endsWith(".css"))return r;if(t&&!r.headers.get("Content-Type").startsWith(t))throw new Error(`Mime type mismatch when loading ${e}`);if(!r.ok)throw new Error(`Unable to load ${e} ${r.status} ${r.statusText}`);return r}(e,t);return await async function(e){const t=await e.blob();return await new Promise((e=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.readAsDataURL(t)}))}(n)}chrome.runtime.onMessage.addListener((({type:t,data:n,error:r,id:o})=>{if(t===e.BG_FETCH_RESPONSE){const e=ze.get(o),t=Qe.get(o);ze.delete(o),Qe.delete(o),r?t&&t(r):e&&e(n)}}));const Ye=new class{constructor(){this.queue=[],this.timerId=null,this.frameDuration=1e3/60}addToQueue(e){this.queue.push(e),this.startQueue()}stopQueue(){null!==this.timerId&&(cancelAnimationFrame(this.timerId),this.timerId=null),this.queue=[]}startQueue(){this.timerId||(this.timerId=requestAnimationFrame((()=>{this.timerId=null;const e=Date.now();let t;for(;t=this.queue.shift();)if(t(),Date.now()-e>=this.frameDuration){this.startQueue();break}})))}};async function Ze(e){return new Promise((async(t,n)=>{let r;if(e.startsWith("data:"))r=e;else try{r=await async function(e){if(new URL(e).origin===location.origin)return await Xe(e);return await Ke({url:e,responseType:"data-url"})}(e)}catch(e){return void n(e)}try{const n=await async function(e){return new Promise(((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=()=>n(`Unable to load image ${e}`),r.src=e}))}(r);Ye.addToQueue((()=>{t({src:e,dataURL:r,width:n.naturalWidth,height:n.naturalHeight,...nt(n)})}))}catch(e){n(e)}}))}const Je=1024;let et,tt;function nt(e){et||(et=document.createElement("canvas"),et.width=1024,et.height=1024,tt=et.getContext("2d"),tt.imageSmoothingEnabled=!1);const{naturalWidth:t,naturalHeight:n}=e;if(0===n||0===t)return e.currentSrc,null;if(t*n*4>5242880)return{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!0};const r=t*n,o=Math.min(1,Math.sqrt(Je/r)),a=Math.ceil(t*o),s=Math.ceil(n*o);tt.clearRect(0,0,a,s),tt.drawImage(e,0,0,t,n,0,0,a,s);const i=tt.getImageData(0,0,a,s).data;let c,l,u,d,h,f,m,p,g=0,b=0,y=0;for(u=0;u<s;u++)for(l=0;l<a;l++)c=4*(u*a+l),d=i[c+0],h=i[c+1],f=i[c+2],m=i[c+3],m/255<.05?g++:(p=H(d,h,f),p<.4&&b++,p>.7&&y++);const k=a*s,E=k-g;return{isDark:b/E>=.7,isLight:y/E>=.7,isTransparent:g/k>=.1,isLarge:r>=48e4,isTooLarge:!1}}function rt({dataURL:e,width:t,height:n},r){const o=[`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${t}" height="${n}">`,"<defs>",'<filter id="darkreader-image-filter">',`<feColorMatrix type="matrix" values="${Ce(r).slice(0,4).map((e=>e.map((e=>e.toFixed(3))).join(" "))).join(" ")}" />`,"</filter>","</defs>",`<image width="${t}" height="${n}" filter="url(#darkreader-image-filter)" xlink:href="${e}" />`,"</svg>"].join("");return`data:image/svg+xml;base64,${btoa(o)}`}function ot(){Ye&&Ye.stopQueue(),et=null,tt=null}const at="gradient".length,st="conic-",it=st.length,ct="radial-",lt="linear-";function ut(e,t){return Boolean(e&&e.getPropertyPriority(t))}function dt(e,t,n,r,o,a){if(e.startsWith("--")){const s=function(e,t,n,r,o,a){return e.getModifierForVariable({varName:t,sourceValue:n,rule:r,ignoredImgSelectors:o,isCancelled:a})}(r,e,t,n,o,a);if(s)return{property:e,value:s,important:ut(n.style,e),sourceValue:t}}else if(t.includes("var(")){const o=function(e,t,n){return e.getModifierForVarDependant(t,n)}(r,e,t);if(o)return{property:e,value:o,important:ut(n.style,e),sourceValue:t}}else{if("color-scheme"===e)return null;if(e.includes("color")&&"-webkit-print-color-adjust"!==e||"fill"===e||"stroke"===e||"stop-color"===e){const r=function(e,t,n){if(gt.has(t.toLowerCase()))return t;const r=$(t);if(!r)return null;if(e.includes("background"))return n.style.webkitMaskImage&&"none"!==n.style.webkitMaskImage||n.style.webkitMask&&!n.style.webkitMask.startsWith("none")||n.style.mask&&"none"!==n.style.mask||n.style.getPropertyValue("mask-image")&&"none"!==n.style.getPropertyValue("mask-image")?e=>Oe(r,e):e=>Ne(r,e);if(e.includes("border")||e.includes("outline"))return e=>Ge(r,e);return e=>Oe(r,e)}(e,t,n);if(r)return{property:e,value:r,important:ut(n.style,e),sourceValue:t}}else if("background-image"===e||"list-style-image"===e){const r=kt(t,n,o,a);if(r)return{property:e,value:r,important:ut(n.style,e),sourceValue:t}}else if(e.includes("shadow")){const r=function(e){const t=Et(e);if(!t)return null;return e=>t(e).result}(t);if(r)return{property:e,value:r,important:ut(n.style,e),sourceValue:t}}}return null}function ht(...e){return e.filter(Boolean).join(", ")}function ft(e,t,n){const r=[];t||(r.push("html {"),r.push(`    background-color: ${Ne({r:255,g:255,b:255},e)} !important;`),r.push("}")),se&&(r.push("html {"),r.push(`    color-scheme: ${1===e.mode?"dark":"dark light"} !important;`),r.push("}"));const o=ht(t?"":"html, body",n?"input, textarea, select, button, dialog":"");return o&&(r.push(`${o} {`),r.push(`    background-color: ${Ne({r:255,g:255,b:255},e)};`),r.push("}")),r.push(`${ht("html, body",n?"input, textarea, select, button":"")} {`),r.push(`    border-color: ${Ge({r:76,g:76,b:76},e)};`),r.push(`    color: ${Oe({r:0,g:0,b:0},e)};`),r.push("}"),r.push("a {"),r.push(`    color: ${Oe({r:0,g:64,b:255},e)};`),r.push("}"),r.push("table {"),r.push(`    border-color: ${Ge({r:128,g:128,b:128},e)};`),r.push("}"),r.push("::placeholder {"),r.push(`    color: ${Oe({r:169,g:169,b:169},e)};`),r.push("}"),r.push("input:-webkit-autofill,"),r.push("textarea:-webkit-autofill,"),r.push("select:-webkit-autofill {"),r.push(`    background-color: ${Ne({r:250,g:255,b:189},e)} !important;`),r.push(`    color: ${Oe({r:0,g:0,b:0},e)} !important;`),r.push("}"),e.scrollbarColor&&r.push(function(e){const t=[];let n,r,o,a,s,i;if("auto"===e.scrollbarColor)n=Ne({r:241,g:241,b:241},e),r=Oe({r:96,g:96,b:96},e),o=Ne({r:176,g:176,b:176},e),a=Ne({r:144,g:144,b:144},e),s=Ne({r:96,g:96,b:96},e),i=Ne({r:255,g:255,b:255},e);else{const t=R($(e.scrollbarColor)),i=t.l>.5,c=e=>({...t,l:we(t.l+e,0,1)}),l=e=>({...t,l:we(t.l-e,0,1)});n=D(l(.4)),r=D(i?l(.4):c(.4)),o=D(t),a=D(c(.1)),s=D(c(.2))}t.push("::-webkit-scrollbar {"),t.push(`    background-color: ${n};`),t.push(`    color: ${r};`),t.push("}"),t.push("::-webkit-scrollbar-thumb {"),t.push(`    background-color: ${o};`),t.push("}"),t.push("::-webkit-scrollbar-thumb:hover {"),t.push(`    background-color: ${a};`),t.push("}"),t.push("::-webkit-scrollbar-thumb:active {"),t.push(`    background-color: ${s};`),t.push("}"),t.push("::-webkit-scrollbar-corner {"),t.push(`    background-color: ${i};`),t.push("}"),ne&&(t.push("* {"),t.push(`    scrollbar-color: ${o} ${n};`),t.push("}"));return t.join("\n")}(e)),e.selectionColor&&r.push(function(e){const t=[],n=mt(e),r=n.backgroundColorSelection,o=n.foregroundColorSelection;return["::selection","::-moz-selection"].forEach((e=>{t.push(`${e} {`),t.push(`    background-color: ${r} !important;`),t.push(`    color: ${o} !important;`),t.push("}")})),t.join("\n")}(e)),r.join("\n")}function mt(e){let t,n;if("auto"===e.selectionColor)t=Ne({r:0,g:96,b:212},{...e,grayscale:0}),n=Oe({r:255,g:255,b:255},{...e,grayscale:0});else{const r=R($(e.selectionColor));t=e.selectionColor,n=r.l<.5?"#FFF":"#000"}return{backgroundColorSelection:t,foregroundColorSelection:n}}function pt(e,{strict:t}){const n=[],r=["microsoft.com","docs.microsoft.com"].includes(location.hostname);return n.push(`html, body, ${t?"body :not(iframe)"+(r?':not(div[style^="position:absolute;top:0;left:-"]':""):"body > :not(iframe)"} {`),n.push(`    background-color: ${Ne({r:255,g:255,b:255},e)} !important;`),n.push(`    border-color: ${Ge({r:64,g:64,b:64},e)} !important;`),n.push(`    color: ${Oe({r:0,g:0,b:0},e)} !important;`),n.push("}"),n.join("\n")}const gt=new Set(["inherit","transparent","initial","currentcolor","none","unset"]);const bt=new Map,yt=new Map;function kt(e,t,n,r){try{const o=function(e){const t=[];let n=0,r=st.length;for(;-1!==(n=e.indexOf("gradient",r));){let o;if([lt,ct,st].find((t=>{if(n-t.length>=0&&e.substring(n-t.length,n)===t)return"repeating"===e.slice(n-t.length-10,n-t.length-1)?(o=`repeating-${t}gradient`,!0):"-webkit"===e.slice(n-t.length-8,n-t.length-1)?(o=`-webkit-${t}gradient`,!0):(o=`${t}gradient`,!0)})),!o)break;const{start:a,end:s}=_(e,n+at),i=e.substring(a+1,s-1);r=s+1+it,t.push({typeGradient:o,match:i,offset:o.length+2,index:n-o.length+at,hasComma:!0})}return t.length&&(t[t.length-1].hasComma=!1),t}(e),a=T(pe,e);if(0===a.length&&0===o.length)return e;const s=t=>{let n=0;return t.map((t=>{const r=e.indexOf(t,n);return n=r+t.length,{match:t,index:r}}))},i=o.map((e=>({type:"gradient",...e}))).concat(s(a).map((e=>({type:"url",offset:0,...e})))).sort(((e,t)=>e.index>t.index?1:-1)),c=e=>{const{typeGradient:t,match:n,hasComma:r}=e,o=/^(from|color-stop|to)\(([^\(\)]*?,\s*)?(.*?)\)$/,a=T(/([^\(\),]+(\([^\(\)]*(\([^\(\)]*\)*[^\(\)]*)?\))?([^\(\), ]|( (?!calc)))*),?/g,n,1).map((e=>{let t=$(e=e.trim());if(t)return e=>Ue(t,e);const n=e.lastIndexOf(" ");if(t=$(e.substring(0,n)),t)return r=>`${Ue(t,r)} ${e.substring(n+1)}`;const r=e.match(o);return r&&(t=$(r[3]),t)?e=>`${r[1]}(${r[2]?`${r[2]}, `:""}${Ue(t,e)})`:()=>e}));return e=>`${t}(${a.map((t=>t(e))).join(", ")})${r?", ":""}`},l=e=>{var o;if(function(e,t){if(!e||0===t.length)return!1;if(t.some((e=>"*"===e)))return!0;const n=e.split(/,\s*/g);for(let e=0;e<t.length;e++){const r=t[e];if(n.some((e=>e===r)))return!0}return!1}(t.selectorText,n))return null;let a=be(e);const s=0===a.length,{parentStyleSheet:i}=t,c=i&&i.href?ye(i.href):(null===(o=i.ownerNode)||void 0===o?void 0:o.baseURI)||location.origin;a=de(c,a);const l=`url("${a}")`;return async e=>{if(s)return"url('')";let t;if(bt.has(a))t=bt.get(a);else try{if(yt.has(a)){const e=yt.get(a);if(t=await new Promise((t=>e.push(t))),!t)return null}else yt.set(a,[]),t=await Ze(a),bt.set(a,t),yt.get(a).forEach((e=>e(t))),yt.delete(a);if(r())return null}catch(e){return yt.has(a)&&(yt.get(a).forEach((e=>e(null))),yt.delete(a)),l}return u(t,e)||l}},u=(e,t)=>{const{isDark:n,isLight:r,isTransparent:o,isLarge:a,isTooLarge:s,width:i}=e;let c;if(s)c=`url("${e.src}")`;else if(n&&o&&1===t.mode&&!a&&i>2){e.src;c=`url("${rt(e,{...t,sepia:we(t.sepia+10,0,100)})}")`}else if(r&&!o&&1===t.mode)if(a)c="none";else{e.src;c=`url("${rt(e,t)}")`}else if(0===t.mode&&r&&!a){e.src;c=`url("${rt(e,{...t,brightness:we(t.brightness-10,5,200),sepia:we(t.sepia+10,0,100)})}")`}else c=null;return c},d=[];let h=0,f=!1;return i.forEach((({type:t,match:n,index:r,typeGradient:o,hasComma:a,offset:s},u)=>{const m=r,p=h,g=m+n.length+s;h=g,p!==m&&(f?d.push((()=>{let t=e.substring(p,m);return","===t[0]&&(t=t.substring(1)),t})):d.push((()=>e.substring(p,m)))),f=a||!1,"url"===t?d.push(l(n)):"gradient"===t&&d.push(c({match:n,index:r,typeGradient:o,hasComma:a,offset:s})),u===i.length-1&&d.push((()=>e.substring(g)))})),e=>{const t=d.filter(Boolean).map((t=>t(e)));if(t.some((e=>e instanceof Promise)))return Promise.all(t).then((e=>e.filter(Boolean).join("")));const n=t.join("");return n.endsWith(", initial")?n.slice(0,-9):n}}catch(e){return null}}function Et(e){try{let t=0;const n=T(/(^|\s)(?!calc)([a-z]+\(.+?\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/gi,e,2);let r=0;const o=n.map(((o,a)=>{const s=t,i=e.indexOf(o,t),c=i+o.length;t=c;const l=$(o);return l?t=>`${e.substring(s,i)}${function(e,t){return Ne(e,t)}(l,t)}${a===n.length-1?e.substring(c):""}`:(r++,()=>e.substring(s,c))}));return e=>{const t=o.map((t=>t(e))).join("");return{matchesLength:n.length,unparseableMatchesLength:r,result:t}}}catch(e){return null}}function St(){xe.clear(),bt.clear(),ot(),yt.clear()}const wt=new class{constructor(){this.varTypes=new Map,this.rulesQueue=[],this.definedVars=new Set,this.varRefs=new Map,this.unknownColorVars=new Set,this.unknownBgVars=new Set,this.undefinedVars=new Set,this.initialVarTypes=new Map,this.changedTypeVars=new Set,this.typeChangeSubscriptions=new Map,this.unstableVarValues=new Map}clear(){this.varTypes.clear(),this.rulesQueue.splice(0),this.definedVars.clear(),this.varRefs.clear(),this.unknownColorVars.clear(),this.unknownBgVars.clear(),this.undefinedVars.clear(),this.initialVarTypes.clear(),this.changedTypeVars.clear(),this.typeChangeSubscriptions.clear(),this.unstableVarValues.clear()}isVarType(e,t){return this.varTypes.has(e)&&(this.varTypes.get(e)&t)>0}addRulesForMatching(e){this.rulesQueue.push(e)}matchVariablesAndDependants(){this.changedTypeVars.clear(),this.initialVarTypes=new Map(this.varTypes),this.collectRootVariables(),this.collectVariablesAndVarDep(this.rulesQueue),this.rulesQueue.splice(0),this.collectRootVarDependants(),this.varRefs.forEach(((e,t)=>{e.forEach((e=>{this.varTypes.has(t)&&this.resolveVariableType(e,this.varTypes.get(t))}))})),this.unknownColorVars.forEach((e=>{this.unknownBgVars.has(e)?(this.unknownColorVars.delete(e),this.unknownBgVars.delete(e),this.resolveVariableType(e,1)):this.isVarType(e,7)?this.unknownColorVars.delete(e):this.undefinedVars.add(e)})),this.unknownBgVars.forEach((e=>{null!=this.findVarRef(e,(e=>this.unknownColorVars.has(e)||this.isVarType(e,6)))?this.itarateVarRefs(e,(e=>{this.resolveVariableType(e,1)})):this.isVarType(e,9)?this.unknownBgVars.delete(e):this.undefinedVars.add(e)})),this.changedTypeVars.forEach((e=>{this.typeChangeSubscriptions.has(e)&&this.typeChangeSubscriptions.get(e).forEach((e=>{e()}))})),this.changedTypeVars.clear()}getModifierForVariable(e){return t=>{const{varName:n,sourceValue:r,rule:o,ignoredImgSelectors:a,isCancelled:s}=e,i=()=>{const e=[],i=(o,a,s)=>{if(!this.isVarType(n,o))return;const i=a(n);let c;if(Rt(r))if(Lt(r)){let e=Ot(r,this.unstableVarValues);e||(e=1===o?"#ffffff":"#000000"),c=s(e,t)}else c=_t(r,(e=>a(e)),(e=>s(e,t)));else c=s(r,t);e.push({property:i,value:c})};if(i(1,At,Pt),i(2,xt,Ft),i(4,$t,Bt),this.isVarType(n,8)){const i=Vt(n);let c=r;Rt(r)&&(c=_t(r,(e=>At(e)),(e=>Pt(e,t))));const l=kt(c,o,a,s);c="function"==typeof l?l(t):l,e.push({property:i,value:c})}return e},c=new Set;return{declarations:i(),onTypeChange:{addListener:e=>{const t=()=>{const t=i();e(t)};c.add(t),this.subscribeForVarTypeChange(n,t)},removeListeners:()=>{c.forEach((e=>{this.unsubscribeFromVariableTypeChanges(n,e)}))}}}}}getModifierForVarDependant(e,t){if(t.match(/^\s*(rgb|hsl)a?\(/)){const n=e.startsWith("background"),r=Dt(e);return e=>{let o=Ot(t,this.unstableVarValues);o||(o=n?"#ffffff":"#000000");return(n?Pt:r?Ft:Bt)(o,e)}}return"background-color"===e?e=>_t(t,(e=>At(e)),(t=>Pt(t,e))):Dt(e)?e=>_t(t,(e=>xt(e)),(t=>Ft(t,e))):"background"===e||"background-image"===e||"box-shadow"===e?n=>{const r=new Set,o=()=>{const o=_t(t,(e=>this.isVarType(e,1)?At(e):this.isVarType(e,8)?Vt(e):(r.add(e),e)),(e=>Pt(e,n)));if("box-shadow"===e){const e=Et(o)(n);if(e.unparseableMatchesLength!==e.matchesLength)return e.result}return o},a=o();return r.size>0?new Promise((e=>{const t=r.values().next().value,n=()=>{this.unsubscribeFromVariableTypeChanges(t,n);const r=o();e(r)};this.subscribeForVarTypeChange(t,n)})):a}:e.startsWith("border")||e.startsWith("outline")?e=>_t(t,(e=>$t(e)),(t=>Bt(t,e))):null}subscribeForVarTypeChange(e,t){this.typeChangeSubscriptions.has(e)||this.typeChangeSubscriptions.set(e,new Set);const n=this.typeChangeSubscriptions.get(e);n.has(t)||n.add(t)}unsubscribeFromVariableTypeChanges(e,t){this.typeChangeSubscriptions.has(e)&&this.typeChangeSubscriptions.get(e).delete(t)}collectVariablesAndVarDep(e){e.forEach((e=>{he(e,(e=>{e.style&&me(e.style,((e,t)=>{Mt(e)&&this.inspectVariable(e,t),Rt(t)&&this.inspectVarDependant(e,t)}))}))}))}collectRootVariables(){me(document.documentElement.style,((e,t)=>{Mt(e)&&this.inspectVariable(e,t)}))}inspectVariable(e,t){if(this.unstableVarValues.set(e,t),Rt(t)&&Lt(t)&&(this.unknownColorVars.add(e),this.definedVars.add(e)),this.definedVars.has(e))return;this.definedVars.add(e);$(t)?this.unknownColorVars.add(e):(t.includes("url(")||t.includes("linear-gradient(")||t.includes("radial-gradient("))&&this.resolveVariableType(e,8)}resolveVariableType(e,t){const n=this.initialVarTypes.get(e)||0,r=(this.varTypes.get(e)||0)|t;this.varTypes.set(e,r),(r!==n||this.undefinedVars.has(e))&&(this.changedTypeVars.add(e),this.undefinedVars.delete(e)),this.unknownColorVars.delete(e),this.unknownBgVars.delete(e)}collectRootVarDependants(){me(document.documentElement.style,((e,t)=>{Rt(t)&&this.inspectVarDependant(e,t)}))}inspectVarDependant(e,t){Mt(e)?this.iterateVarDeps(t,(t=>{this.varRefs.has(e)||this.varRefs.set(e,new Set),this.varRefs.get(e).add(t)})):"background-color"===e||"box-shadow"===e?this.iterateVarDeps(t,(e=>this.resolveVariableType(e,1))):Dt(e)?this.iterateVarDeps(t,(e=>this.resolveVariableType(e,2))):e.startsWith("border")||e.startsWith("outline")?this.iterateVarDeps(t,(e=>this.resolveVariableType(e,4))):"background"!==e&&"background-image"!==e||this.iterateVarDeps(t,(e=>{if(this.isVarType(e,9))return;const t=null!=this.findVarRef(e,(e=>this.unknownColorVars.has(e)||this.isVarType(e,6)));this.itarateVarRefs(e,(e=>{t?this.resolveVariableType(e,1):this.unknownBgVars.add(e)}))}))}iterateVarDeps(e,t){const n=new Set;!function(e,t){_t(e,(e=>(t(e),e)))}(e,(e=>n.add(e))),n.forEach((e=>t(e)))}findVarRef(e,t,n=new Set){if(n.has(e))return null;n.add(e);if(t(e))return e;const r=this.varRefs.get(e);if(!r||0===r.size)return null;for(const e of r){const r=this.findVarRef(e,t,n);if(r)return r}return null}itarateVarRefs(e,t){this.findVarRef(e,(e=>(t(e),!1)))}setOnRootVariableChange(e){this.onRootVariableDefined=e}putRootVars(e,t){if(!e)return;const n=e.sheet;n.cssRules.length>0&&n.deleteRule(0);const r=new Map;me(document.documentElement.style,((e,n)=>{Mt(e)&&(this.isVarType(e,1)&&r.set(At(e),Pt(n,t)),this.isVarType(e,2)&&r.set(xt(e),Ft(n,t)),this.isVarType(e,4)&&r.set($t(e),Bt(n,t)),this.subscribeForVarTypeChange(e,this.onRootVariableDefined))}));const o=[];o.push(":root {");for(const[e,t]of r)o.push(`    ${e}: ${t};`);o.push("}");const a=o.join("\n");n.insertRule(a)}};function vt(e,t=0){const n=e.indexOf("var(",t);if(n>=0){const t=_(e,n+3);return t?{start:n,end:t.end}:null}}function Ct(e,t){const n=function(e){const t=[];let n,r=0;for(;n=vt(e,r);){const{start:o,end:a}=n;t.push({start:o,end:a,value:e.substring(o,a)}),r=n.end+1}return t}(e),r=n.length;if(0===r)return e;const o=e.length,a=n.map((e=>t(e.value))),s=[];s.push(e.substring(0,n[0].start));for(let t=0;t<r;t++){s.push(a[t]);const i=n[t].end,c=t<r-1?n[t+1].start:o;s.push(e.substring(i,c))}return s.join("")}function Tt(e){const t=e.indexOf(",");let n,r;return t>=0?(n=e.substring(4,t).trim(),r=e.substring(t+1,e.length-1).trim()):(n=e.substring(4,e.length-1).trim(),r=""),{name:n,fallback:r}}function _t(e,t,n){return Ct(e,(e=>{const{name:r,fallback:o}=Tt(e),a=t(r);if(!o)return`var(${a})`;let s;return s=Rt(o)?_t(o,t,n):n?n(o):o,`var(${a}, ${s})`}))}function At(e){return`--darkreader-bg${e}`}function xt(e){return`--darkreader-text${e}`}function $t(e){return`--darkreader-border${e}`}function Vt(e){return`--darkreader-bgimg${e}`}function Mt(e){return e.startsWith("--")}function Rt(e){return e.includes("var(")}function Lt(e){return e.match(/^\s*(rgb|hsl)a?\(/)}function Dt(e){return"color"===e||"caret-color"===e||"-webkit-text-fill-color"===e}const It=/^\d{1,3}, ?\d{1,3}, ?\d{1,3}$/;function Nt(e,t,n){const{isRaw:r,color:o}=function(e){if(It.test(e)){const t=e.split(",");let n="rgb(";return t.forEach((e=>{n+=`${e.trim()}, `})),n=n.substring(0,n.length-2),n+=")",{isRaw:!0,color:n}}return{isRaw:!1,color:e}}(e),a=$(o);if(a){const e=n(a,t);if(r){const t=$(e);return t?`${t.r}, ${t.g}, ${t.b}`:e}return e}return o}function Pt(e,t){return Nt(e,t,Ne)}function Ft(e,t){return Nt(e,t,Oe)}function Bt(e,t){return Nt(e,t,Ge)}function Ot(e,t,n=new Set){let r=!1;const o=Ct(e,(e=>{const{name:o,fallback:a}=Tt(e);if(n.has(o))return r=!0,null;n.add(o);const s=t.get(o)||a;let i=null;return s&&(i=Rt(s)?Ot(s,t,n):s),i||(r=!0,null)}));return r?null:o}const qt={"background-color":{customProp:"--darkreader-inline-bgcolor",cssProp:"background-color",dataAttr:"data-darkreader-inline-bgcolor"},"background-image":{customProp:"--darkreader-inline-bgimage",cssProp:"background-image",dataAttr:"data-darkreader-inline-bgimage"},"border-color":{customProp:"--darkreader-inline-border",cssProp:"border-color",dataAttr:"data-darkreader-inline-border"},"border-bottom-color":{customProp:"--darkreader-inline-border-bottom",cssProp:"border-bottom-color",dataAttr:"data-darkreader-inline-border-bottom"},"border-left-color":{customProp:"--darkreader-inline-border-left",cssProp:"border-left-color",dataAttr:"data-darkreader-inline-border-left"},"border-right-color":{customProp:"--darkreader-inline-border-right",cssProp:"border-right-color",dataAttr:"data-darkreader-inline-border-right"},"border-top-color":{customProp:"--darkreader-inline-border-top",cssProp:"border-top-color",dataAttr:"data-darkreader-inline-border-top"},"box-shadow":{customProp:"--darkreader-inline-boxshadow",cssProp:"box-shadow",dataAttr:"data-darkreader-inline-boxshadow"},color:{customProp:"--darkreader-inline-color",cssProp:"color",dataAttr:"data-darkreader-inline-color"},fill:{customProp:"--darkreader-inline-fill",cssProp:"fill",dataAttr:"data-darkreader-inline-fill"},stroke:{customProp:"--darkreader-inline-stroke",cssProp:"stroke",dataAttr:"data-darkreader-inline-stroke"},"outline-color":{customProp:"--darkreader-inline-outline",cssProp:"outline-color",dataAttr:"data-darkreader-inline-outline"},"stop-color":{customProp:"--darkreader-inline-stopcolor",cssProp:"stop-color",dataAttr:"data-darkreader-inline-stopcolor"}},Gt=Object.values(qt),Ut={};Gt.forEach((({cssProp:e,customProp:t})=>Ut[t]=e));const Wt=["style","fill","stop-color","stroke","bgcolor","color"],Ht=Wt.map((e=>`[${e}]`)).join(", ");function jt(){return Gt.map((({dataAttr:e,customProp:t,cssProp:n})=>[`[${e}] {`,`  ${n}: var(${t}) !important;`,"}"].join("\n"))).join("\n")}const zt=new Map,Qt=new Map;function Kt(e,n,a){zt.has(e)&&(zt.get(e).disconnect(),Qt.get(e).disconnect());const s=new WeakSet;function i(e){(function(e){const t=[];return e instanceof Element&&e.matches(Ht)&&t.push(e),(e instanceof Element||re&&e instanceof ShadowRoot||e instanceof Document)&&r(t,e.querySelectorAll(Ht)),t})(e).forEach((e=>{s.has(e)||(s.add(e),n(e))})),c(e,(t=>{s.has(e)||(s.add(e),a(t.shadowRoot),Kt(t.shadowRoot,n,a))}))}const l=y(e,{onMinorMutations:({additions:e})=>{e.forEach((e=>i(e)))},onHugeMutations:()=>{i(e)}});zt.set(e,l);let u=0,d=null;const h=o({seconds:10}),f=o({seconds:2});let m=[],p=null;const g=t((e=>{e.forEach((e=>{Wt.includes(e.attributeName)&&n(e.target)}))})),b=new MutationObserver((e=>{if(p)return void m.push(...e);u++;const t=Date.now();if(null==d)d=t;else if(u>=50){if(t-d<h)return p=setTimeout((()=>{d=null,u=0,p=null;const e=m;m=[],g(e)}),f),void m.push(...e);d=t,u=1}g(e)}));b.observe(e,{attributes:!0,attributeFilter:Wt.concat(Gt.map((({dataAttr:e})=>e))),subtree:!0}),Qt.set(e,b)}const Xt=new WeakMap,Yt=["brightness","contrast","grayscale","sepia","mode"];function Zt(e,t){return Wt.map((t=>`${t}="${e.getAttribute(t)}"`)).concat(Yt.map((e=>`${e}="${t[e]}"`))).join(" ")}function Jt(e,t,r,o){if(Zt(e,t)===Xt.get(e))return;const a=new Set(Object.keys(qt));function s(n,r,s){const i=n.startsWith("--"),{customProp:c,dataAttr:l}=i?{}:qt[n],u=dt(r,s,{style:e.style},wt,o,null);if(!u)return;let d=u.value;if("function"==typeof d&&(d=d(t)),i&&"object"==typeof d){d.declarations.forEach((({property:t,value:n})=>{!(n instanceof Promise)&&e.style.setProperty(t,n)}))}else e.style.setProperty(c,d),e.hasAttribute(l)||e.setAttribute(l,""),a.delete(n)}if(r.length>0&&function(e,t){for(let n=0,r=t.length;n<r;n++){const r=t[n];if(e.matches(r))return!0}return!1}(e,r))a.forEach((t=>{e.removeAttribute(qt[t].dataAttr)}));else{if(e.hasAttribute("bgcolor")){let t=e.getAttribute("bgcolor");(t.match(/^[0-9a-f]{3}$/i)||t.match(/^[0-9a-f]{6}$/i))&&(t=`#${t}`),s("background-color","background-color",t)}if(e.hasAttribute("color")&&"mask-icon"!==e.rel){let t=e.getAttribute("color");(t.match(/^[0-9a-f]{3}$/i)||t.match(/^[0-9a-f]{6}$/i))&&(t=`#${t}`),s("color","color",t)}if(e instanceof SVGElement){if(e.hasAttribute("fill")){const t=32,n=e.getAttribute("fill");if("none"!==n)if(e instanceof SVGTextElement)s("fill","color",n);else{const r=()=>{const{width:r,height:o}=e.getBoundingClientRect();s("fill",r>t||o>t?"background-color":"color",n)};f()?r():p(r)}}e.hasAttribute("stop-color")&&s("stop-color","background-color",e.getAttribute("stop-color"))}if(e.hasAttribute("stroke")){const t=e.getAttribute("stroke");s("stroke",e instanceof SVGLineElement||e instanceof SVGTextElement?"border-color":"color",t)}e.style&&me(e.style,((t,n)=>{if("background-image"!==t||!n.includes("url"))if(qt.hasOwnProperty(t)||t.startsWith("--")&&!Ut[t])s(t,t,n);else{const n=Ut[t];if(n&&!e.style.getPropertyValue(n)&&!e.hasAttribute(n)){if("background-color"===n&&e.hasAttribute("bgcolor"))return;e.style.setProperty(t,"")}}})),e.style&&e instanceof SVGTextElement&&e.style.fill&&s("fill","color",e.style.getPropertyValue("fill")),n(a,(t=>{e.removeAttribute(qt[t].dataAttr)})),Xt.set(e,Zt(e,t))}}const en="theme-color",tn='meta[name="theme-color"]';let nn=null,rn=null;function on(e,t){nn=nn||e.content;const n=$(nn);n&&(e.content=Ne(n,t))}const an=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];const sn=function(){const e=[];let t=null;function n(){let n;for(;n=e.shift();)n();t=null}return{add:function(r){e.push(r),t||(t=requestAnimationFrame(n))},cancel:function(){e.splice(0),cancelAnimationFrame(t),t=null}}}();function cn(){let e=0;const t=new Set,n=new Map,r=new Set;let o=null,a=!1,s=!1;return{modifySheet:function(i){const c=i.sourceCSSRules,{theme:l,ignoreImageAnalysis:u,force:d,prepareSheet:h,isAsyncCancelled:f}=i;let m=0===n.size;const p=new Set(n.keys()),g=function(e){let t="";return an.forEach((n=>{t+=`${n}:${e[n]};`})),t}(l),b=g!==o;a&&(s=!0);const y=[];if(he(c,(e=>{let r=e.cssText,o=!1;if(p.delete(r),e.parentRule instanceof CSSMediaRule&&(r+=`;${e.parentRule.media.mediaText}`),t.has(r)||(t.add(r),o=!0),!o)return void y.push(n.get(r));m=!0;const a=[];e.style&&me(e.style,((t,n)=>{const r=dt(t,n,e,wt,u,f);r&&a.push(r)}));let s=null;if(a.length>0){const t=e.parentRule;s={selector:e.selectorText,declarations:a,parentRule:t},y.push(s)}n.set(r,s)}),(()=>{a=!0})),p.forEach((e=>{t.delete(e),n.delete(e)})),o=g,!d&&!m&&!b)return;function k(e,t,n){const{selector:r,declarations:o}=n;let a="";o.forEach((e=>{a+=`${(e=>{const{property:t,value:n,important:r,sourceValue:o}=e;return`${t}: ${null==n?o:n}${r?" !important":""};`})(e)} `}));const s=`${r} { ${a} }`;e.insertRule(s,t)}e++;const E=new Map,S=new Map;let w=0,v=0;const C={rule:null,rules:[],isGroup:!0},T=new WeakMap;function _(e){if(null==e)return C;if(T.has(e))return T.get(e);const t={rule:e,rules:[],isGroup:!0};T.set(e,t);return _(e.parentRule).rules.push(t),t}r.forEach((e=>e())),r.clear(),y.filter((e=>e)).forEach((({selector:t,declarations:n,parentRule:o})=>{const a=_(o),s={selector:t,declarations:[],isGroup:!1},i=s.declarations;function c(t,n,r,o){const a=++w,s={property:t,value:null,important:r,asyncKey:a,sourceValue:o};i.push(s);const c=e;n.then((t=>{t&&!f()&&c===e&&(s.value=t,sn.add((()=>{f()||c!==e||function(e){const{rule:t,target:n,index:r}=E.get(e);n.deleteRule(r),k(n,r,t),E.delete(e)}(a)})))}))}function u(t,n,o,a){const{declarations:s,onTypeChange:l}=n,u=++v,d=e,h=i.length;let m=[];if(0===s.length){const e={property:t,value:a,important:o,sourceValue:a,varKey:u};i.push(e),m=[e]}s.forEach((e=>{if(e.value instanceof Promise)c(e.property,e.value,o,a);else{const t={property:e.property,value:e.value,important:o,sourceValue:a,varKey:u};i.push(t),m.push(t)}})),l.addListener((t=>{if(f()||d!==e)return;const n=t.map((e=>({property:e.property,value:e.value,important:o,sourceValue:a,varKey:u}))),r=i.indexOf(m[0],h);i.splice(r,m.length,...n),m=n,function(e){const{rule:t,target:n,index:r}=S.get(e);n.deleteRule(r),k(n,r,t)}(u)})),r.add((()=>l.removeListeners()))}a.rules.push(s),n.forEach((({property:e,value:t,important:n,sourceValue:r})=>{if("function"==typeof t){const o=t(l);o instanceof Promise?c(e,o,n,r):e.startsWith("--")?u(e,o,n,r):i.push({property:e,value:o,important:n,sourceValue:r})}else i.push({property:e,value:t,important:n,sourceValue:r})}))}));const A=h();!function e(t,n,r){t.rules.forEach((t=>{t.isGroup?e(t,function(e,t){const{rule:n}=e;if(n instanceof CSSMediaRule){const{media:e}=n,r=t.cssRules.length;return t.insertRule(`@media ${e.mediaText} {}`,r),t.cssRules[r]}return t}(t,n),r):r(t,n)}))}(C,A,((e,t)=>{const n=t.cssRules.length;e.declarations.forEach((({asyncKey:r,varKey:o})=>{null!=r&&E.set(r,{rule:e,target:t,index:n}),null!=o&&S.set(o,{rule:e,target:t,index:n})})),k(t,n,e)}))},shouldRebuildStyle:function(){return a&&!s}}}function ln(e){return(e instanceof HTMLStyleElement||e instanceof SVGStyleElement||e instanceof HTMLLinkElement&&e.rel&&e.rel.toLowerCase().includes("stylesheet")&&e.href&&!e.disabled&&(!ne||!e.href.startsWith("moz-extension://"))&&!function(e){if(!e.href)return!1;try{return"fonts.googleapis.com"===new URL(e.href).hostname}catch(t){return e.href,!1}}(e))&&!e.classList.contains("darkreader")&&!e.classList.contains("darkreader-disabled-style")&&"print"!==e.media.toLowerCase()&&!e.classList.contains("stylus")}function un(e,t=[],r=!0){return ln(e)?t.push(e):(e instanceof Element||re&&e instanceof ShadowRoot||e===document)&&(n(e.querySelectorAll('style, link[rel*="stylesheet" i]:not([disabled])'),(e=>un(e,t,!1))),r&&c(e,(e=>un(e.shadowRoot,t,!1)))),t}const dn=new WeakSet,hn=new WeakSet;let fn=!1;document.addEventListener("__darkreader__inlineScriptsAllowed",(()=>{fn=!0}));let mn=0;const pn=new Map;function gn(e,{update:t,loadingStart:n,loadingEnd:r}){const o=[];let a=e;for(;(a=a.nextElementSibling)&&a.matches(".darkreader");)o.push(a);let c=o.find((e=>e.matches(".darkreader--cors")&&!hn.has(e)))||null,l=o.find((e=>e.matches(".darkreader--sync")&&!dn.has(e)))||null,u=null,d=null,h=!1,f=!0;const m=cn(),g=new MutationObserver((()=>{t()})),b={attributes:!0,childList:!0,subtree:!0,characterData:!0};function y(){return e instanceof HTMLStyleElement&&e.textContent.trim().match(ge)}function k(e,t){let n=!1;if(e){let r;e:for(let o=0,a=e.length;o<a;o++)if(r=e[o],r.href){if(!t){n=!0;break e}if(r.href.startsWith("http")&&!r.href.startsWith(location.origin)){n=!0;break e}}}return n}function E(){if(c)return c.sheet.cssRules;if(y())return null;const t=x();return e instanceof HTMLLinkElement&&!function(e){if(e.startsWith("data:"))return!0;const t=ue(e);return t.protocol===location.protocol&&t.hostname===location.hostname&&t.port===location.port&&t.pathname===location.pathname}(e.href)&&k(t,!1)||k(t,!0)?null:t}function S(){c?(e.nextSibling!==c&&e.parentNode.insertBefore(c,e.nextSibling),c.nextSibling!==l&&e.parentNode.insertBefore(l,c.nextSibling)):e.nextSibling!==l&&e.parentNode.insertBefore(l,e.nextSibling)}let w=!1,v=!1;const C=++mn;async function T(){let t,n;if(e instanceof HTMLLinkElement){let[o,a]=A();if(!o&&!a||(r=a)&&r.message&&r.message.includes("loading")){try{await async function(e,t){return new Promise(((n,r)=>{const o=()=>{e.removeEventListener("load",a),e.removeEventListener("error",s),pn.delete(t)},a=()=>{o(),n()},s=()=>{o(),r(`Linkelement ${t} couldn't be loaded. ${e.href}`)};pn.set(t,(()=>{o(),r()})),e.addEventListener("load",a),e.addEventListener("error",s),e.href||s()}))}(e,C)}catch(e){v=!0}if(h)return null;[o,a]=A()}if(o&&!k(o,!1))return o;if(t=await bn(e.href),n=ye(e.href),h)return null}else{if(!y())return null;t=e.textContent.trim(),n=ye(location.href)}var r;if(t){try{const r=await yn(t,n);c=function(e,t){if(!t)return null;const n=document.createElement("style");return n.classList.add("darkreader"),n.classList.add("darkreader--cors"),n.media="screen",n.textContent=t,e.parentNode.insertBefore(n,e.nextSibling),n.sheet.disabled=!0,hn.add(n),n}(e,r)}catch(e){}if(c)return u=i(c,"prev-sibling"),c.sheet.cssRules}return null}let _=!1;function A(){try{return null==e.sheet?[null,null]:[e.sheet.cssRules,null]}catch(e){return[null,e]}}function x(){const[e,t]=A();return t?null:e}function $(){e.addEventListener("__darkreader__updateSheet",I),fn&&e.sheet||function(){V=R(),L();const n=()=>{R()!==V&&(V=R(),t()),fn&&e.sheet?L():M=requestAnimationFrame(n)};n()}()}let V=null,M=null;function R(){const e=x();return e?e.length:null}function L(){cancelAnimationFrame(M)}let D=!1;function I(){function e(){D=!1,h||t()}fn=!0,L(),D||(D=!0,"function"==typeof queueMicrotask?queueMicrotask(e):requestAnimationFrame(e))}function N(){e.removeEventListener("__darkreader__updateSheet",I),L()}function P(){g.disconnect(),h=!0,u&&u.stop(),d&&d.stop(),N()}let F=0;return{details:function(e){const o=E();return o?{rules:o}:(e.secondRound||w||v||(w=!0,n(),T().then((e=>{w=!1,r(),e&&t()})).catch((e=>{w=!1,r()}))),null)},render:function(n,r){const o=E();function a(){l||(l=e instanceof SVGStyleElement?document.createElementNS("http://www.w3.org/2000/svg","style"):document.createElement("style"),l.classList.add("darkreader"),l.classList.add("darkreader--sync"),l.media="screen",e.title&&(l.title=e.title),dn.add(l)),d&&d.stop(),S(),null==l.sheet&&(l.textContent="");return function(e){for(let t=e.cssRules.length-1;t>=0;t--)e.deleteRule(t)}(l.sheet),d?d.run():d=i(l,"prev-sibling",(()=>{_=!0,s()})),l.sheet}function s(){const e=_;_=!1,m.modifySheet({prepareSheet:a,sourceCSSRules:o,theme:n,ignoreImageAnalysis:r,force:e,isAsyncCancelled:()=>h}),f=0===l.sheet.cssRules.length,m.shouldRebuildStyle()&&p((()=>t()))}o&&(h=!1,s())},pause:P,destroy:function(){if(P(),s(c),s(l),r(),pn.has(C)){const e=pn.get(C);pn.delete(C),e&&e()}},watch:function(){g.observe(e,b),e instanceof HTMLStyleElement&&$()},restore:function(){l&&(F++,F>10||(S(),u&&u.skip(),d&&d.skip(),f||(_=!0,t())))}}}async function bn(e){return e.startsWith("data:")?await(await fetch(e)).text():await Ke({url:e,responseType:"text",mimeType:"text/css",origin:window.location.origin})}async function yn(e,t,n=new Map){e=function(e,t){return e.replace(pe,(e=>{const n=be(e);try{return`url('${de(t,n)}')`}catch(t){return e}}))}(e=function(e){return e.replace(Ee,"")}(e=e.replace(ke,"")),t);const r=T(ge,e);for(const o of r){const r=de(t,be(o.substring(7).trim().replace(/;$/,"").replace(/screen$/,"")));let a;if(n.has(r))a=n.get(r);else try{a=await bn(r),n.set(r,a),a=await yn(a,ye(r),n)}catch(e){a=""}e=e.split(o).join(a)}return e=e.trim()}const kn=[];let En;const Sn=new Map;let wn;function vn(e){ae&&n(e.querySelectorAll(":not(:defined)"),(e=>{let t=e.tagName.toLowerCase();if(!t.includes("-")){const n=e.getAttribute("is");if(!n)return;t=n}Sn.has(t)||(Sn.set(t,new Set),async function(e){return new Promise((t=>{if(window.customElements&&"function"==typeof customElements.whenDefined)customElements.whenDefined(e).then((()=>t()));else if(Cn)Tn.set(e,t),document.dispatchEvent(new CustomEvent("__darkreader__addUndefinedResolver",{detail:{tag:e}}));else{const n=()=>{const r=Sn.get(e);r&&r.size>0&&(r.values().next().value.matches(":defined")?t():requestAnimationFrame(n))};requestAnimationFrame(n)}}))}(t).then((()=>{if(wn){const e=Sn.get(t);Sn.delete(t),wn(Array.from(e))}}))),Sn.get(t).add(e)}))}let Cn=!1;document.addEventListener("__darkreader__inlineScriptsAllowed",(()=>{Cn=!0}));const Tn=new Map;function _n(e){if(Cn=!0,Tn.has(e.detail.tag)){Tn.get(e.detail.tag)()}}function An(e,t,n){xn();const o=new Set(e),a=new WeakMap,s=new WeakMap;function i(e){a.set(e,e.previousElementSibling),s.set(e,e.nextElementSibling)}function l(e){const{createdStyles:n,removedStyles:r,movedStyles:c}=e;n.forEach((e=>i(e))),c.forEach((e=>i(e))),r.forEach((e=>{return t=e,a.delete(t),void s.delete(t);var t})),n.forEach((e=>o.add(e))),r.forEach((e=>o.delete(e))),n.size+r.size+c.size>0&&t({created:Array.from(n),removed:Array.from(r),moved:Array.from(c),updated:[]})}function u({additions:e,moves:t,deletions:n}){const r=new Set,o=new Set,a=new Set;e.forEach((e=>un(e).forEach((e=>r.add(e))))),n.forEach((e=>un(e).forEach((e=>o.add(e))))),t.forEach((e=>un(e).forEach((e=>a.add(e))))),l({createdStyles:r,removedStyles:o,movedStyles:a}),e.forEach((e=>{c(e,m),vn(e)}))}function d(e){const t=new Set(un(e)),n=new Set,r=new Set,i=new Set;t.forEach((e=>{o.has(e)||n.add(e)})),o.forEach((e=>{t.has(e)||r.add(e)})),t.forEach((e=>{var t;n.has(e)||r.has(e)||(t=e).previousElementSibling===a.get(t)&&t.nextElementSibling===s.get(t)||i.add(e)})),l({createdStyles:n,removedStyles:r,movedStyles:i}),c(e,m),vn(e)}function h(e){const n=new Set,r=new Set;e.forEach((e=>{const{target:t}=e;t.isConnected&&(ln(t)?n.add(t):t instanceof HTMLLinkElement&&t.disabled&&r.add(t))})),n.size+r.size>0&&t({updated:Array.from(n),created:[],removed:Array.from(r),moved:[]})}function f(e){const t=y(e,{onMinorMutations:u,onHugeMutations:d}),n=new MutationObserver(h);n.observe(e,{attributes:!0,attributeFilter:["rel","disabled","media","href"],subtree:!0}),kn.push(t,n),En.add(e)}function m(e){const{shadowRoot:t}=e;null==t||En.has(t)||(f(t),n(t))}e.forEach(i),f(document),c(document.documentElement,m),wn=e=>{const n=[];e.forEach((e=>r(n,un(e.shadowRoot)))),t({created:n,updated:[],removed:[],moved:[]}),e.forEach((e=>{const{shadowRoot:t}=e;null!=t&&(m(e),c(t,m),vn(t))}))},document.addEventListener("__darkreader__isDefined",_n),vn(document)}function xn(){kn.forEach((e=>e.disconnect())),kn.splice(0,kn.length),En=new WeakSet,wn=null,Sn.clear(),document.removeEventListener("__darkreader__isDefined",_n)}const $n=new WeakMap,Vn=new WeakSet;function Mn(e){let t=!1;return{render:function(n,r){e.adoptedStyleSheets.forEach((o=>{if(Vn.has(o))return;const a=o.rules,s=new CSSStyleSheet;cn().modifySheet({prepareSheet:function(){for(let e=s.cssRules.length-1;e>=0;e--)s.deleteRule(e);return function(t,n){const r=[...e.adoptedStyleSheets],o=r.indexOf(t),a=r.indexOf(n);o!==a-1&&(a>=0&&r.splice(a,1),r.splice(o+1,0,n),e.adoptedStyleSheets=r)}(o,s),$n.set(o,s),Vn.add(s),s},sourceCSSRules:a,theme:n,ignoreImageAnalysis:r,force:!1,isAsyncCancelled:()=>t})}))},destroy:function(){t=!0;const n=[...e.adoptedStyleSheets];e.adoptedStyleSheets.forEach((e=>{if(Vn.has(e)){const t=n.indexOf(e);t>=0&&n.splice(t,1),$n.delete(e),Vn.delete(e)}})),e.adoptedStyleSheets=n}}}const Rn=function(){if("randomUUID"in crypto){const e=crypto.randomUUID();return e.substring(0,8)+e.substring(9,13)+e.substring(14,18)+e.substring(19,23)+e.substring(24)}return Array.from(crypto.getRandomValues(new Uint8Array(16))).map((e=>{return((t=e)<16?"0":"")+t.toString(16);var t})).join("")}(),Ln=new Map,Dn=[];let In=null,Nn=null,Pn=null,Fn=null,Bn=null;function On(e,t=document.head||document){let n=t.querySelector(`.${e}`);return n||(n=document.createElement("style"),n.classList.add("darkreader"),n.classList.add(e),n.media="screen",n.textContent=""),n}const qn=new Map;function Gn(e,t){qn.has(t)&&qn.get(t).stop(),qn.set(t,i(e,"parent"))}const Un=new Set;function Wn(e){const t=On("darkreader--inline",e);t.textContent=jt(),e.insertBefore(t,e.firstChild);const n=On("darkreader--override",e);n.textContent=Nn&&Nn.css?Hn(Nn.css):"",e.insertBefore(n,t.nextSibling);const r=On("darkreader--invert",e);Nn&&Array.isArray(Nn.invert)&&Nn.invert.length>0?r.textContent=[`${Nn.invert.join(", ")} {`,`    filter: ${He({...In,contrast:0===In.mode?In.contrast:we(In.contrast-10,0,100)})} !important;`,"}"].join("\n"):r.textContent="",e.insertBefore(r,n.nextSibling),Un.add(e)}function Hn(e){return e.replace(/\${(.+?)}/g,((e,t)=>{const n=$(t);return n?Me(n,In,Re):t}))}function jn(){const e=document.querySelector(".darkreader--fallback");e&&(e.textContent="")}let zn=0;const Qn=new Set;function Kn(e){const t=++zn;const n=gn(e,{update:function(){const e=n.details({secondRound:!0});e&&(wt.addRulesForMatching(e.rules),wt.matchVariablesAndDependants(),n.render(In,Fn))},loadingStart:function(){if(!l()||!nr){Qn.add(t),Qn.size;const e=document.querySelector(".darkreader--fallback");e.textContent||(e.textContent=pt(In,{strict:!1}))}},loadingEnd:function(){Qn.delete(t),Qn.size,0===Qn.size&&l()&&jn()}});return Ln.set(e,n),n}function Xn(e){const t=Ln.get(e);t&&(t.destroy(),Ln.delete(e))}const Yn=t((e=>{Ln.forEach((e=>e.render(In,Fn))),Dn.forEach((e=>e.render(In,Fn))),e&&e()})),Zn=function(){Yn.cancel()};function Jn(){0!==Qn.size||jn()}let er,tr=null,nr=!document.hidden;function rr(){document.removeEventListener("visibilitychange",tr),tr=null}function or(){function e(){var e,t;!function(){Zn();const e=un(document).filter((e=>!Ln.has(e))).map((e=>Kn(e)));e.map((e=>e.details({secondRound:!1}))).filter((e=>e&&e.rules.length>0)).forEach((e=>{wt.addRulesForMatching(e.rules)})),wt.matchVariablesAndDependants(),wt.setOnRootVariableChange((()=>{wt.putRootVars(document.head.querySelector(".darkreader--root-vars"),In)})),wt.putRootVars(document.head.querySelector(".darkreader--root-vars"),In),Ln.forEach((e=>e.render(In,Fn))),0===Qn.size&&jn(),e.forEach((e=>e.watch()));const t=function(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}(document.querySelectorAll(Ht));c(document.documentElement,(e=>{Wn(e.shadowRoot);const n=e.shadowRoot.querySelectorAll(Ht);n.length>0&&r(t,n)})),t.forEach((e=>Jt(e,In,Bn,Fn))),ar(document)}(),An(Array.from(Ln.keys()),(({created:e,updated:t,removed:n,moved:r})=>{const o=n,a=e.concat(t).concat(r).filter((e=>!Ln.has(e))),s=r.filter((e=>Ln.has(e)));o.forEach((e=>Xn(e)));const i=a.map((e=>Kn(e)));i.map((e=>e.details({secondRound:!1}))).filter((e=>e&&e.rules.length>0)).forEach((e=>{wt.addRulesForMatching(e.rules)})),wt.matchVariablesAndDependants(),i.forEach((e=>e.render(In,Fn))),i.forEach((e=>e.watch())),s.forEach((e=>Ln.get(e).restore()))}),(e=>{Wn(e),ar(e)})),e=e=>{Jt(e,In,Bn,Fn),e===document.documentElement&&(e.getAttribute("style")||"").includes("--")&&(wt.matchVariablesAndDependants(),wt.putRootVars(document.head.querySelector(".darkreader--root-vars"),In))},t=e=>{Wn(e);const t=e.querySelectorAll(Ht);t.length>0&&n(t,(e=>Jt(e,In,Bn,Fn)))},Kt(document,e,t),c(document.documentElement,(n=>{Kt(n.shadowRoot,e,t)})),d(Jn)}!function(){const e=On("darkreader--fallback",document);e.textContent=pt(In,{strict:!0}),document.head.insertBefore(e,document.head.firstChild),Gn(e,"fallback");const t=On("darkreader--user-agent");t.textContent=ft(In,Pn,In.styleSystemControls),document.head.insertBefore(t,e.nextSibling),Gn(t,"user-agent");const n=On("darkreader--text");In.useFont||In.textStroke>0?n.textContent=function(e){const t=[];return t.push('*:not(pre, pre *, code, .far, .fa, .glyphicon, [class*="vjs-"], .fab, .fa-github, .fas, .material-icons, .icofont, .typcn, mu, [class*="mu-"], .glyphicon, .icon) {'),e.useFont&&e.fontFamily&&t.push(`  font-family: ${e.fontFamily} !important;`),e.textStroke>0&&(t.push(`  -webkit-text-stroke: ${e.textStroke}px !important;`),t.push(`  text-stroke: ${e.textStroke}px !important;`)),t.push("}"),t.join("\n")}(In):n.textContent="",document.head.insertBefore(n,e.nextSibling),Gn(n,"text");const r=On("darkreader--invert");Nn&&Array.isArray(Nn.invert)&&Nn.invert.length>0?r.textContent=[`${Nn.invert.join(", ")} {`,`    filter: ${He({...In,contrast:0===In.mode?In.contrast:we(In.contrast-10,0,100)})} !important;`,"}"].join("\n"):r.textContent="",document.head.insertBefore(r,n.nextSibling),Gn(r,"invert");const o=On("darkreader--inline");o.textContent=jt(),document.head.insertBefore(o,r.nextSibling),Gn(o,"inline");const a=On("darkreader--override");a.textContent=Nn&&Nn.css?Hn(Nn.css):"",document.head.appendChild(a),Gn(a,"override");const s=On("darkreader--variables"),i=mt(In),{darkSchemeBackgroundColor:c,darkSchemeTextColor:l,lightSchemeBackgroundColor:u,lightSchemeTextColor:d,mode:h}=In;let f=0===h?u:c,m=0===h?d:l;f=Ne($(f),In),m=Oe($(m),In),s.textContent=[":root {",`   --darkreader-neutral-background: ${f};`,`   --darkreader-neutral-text: ${m};`,`   --darkreader-selection-background: ${i.backgroundColorSelection};`,`   --darkreader-selection-text: ${i.foregroundColorSelection};`,"}"].join("\n"),document.head.insertBefore(s,o.nextSibling),Gn(s,"variables");const p=On("darkreader--root-vars");document.head.insertBefore(p,s.nextSibling),Nn&&Nn.disableStyleSheetsProxy}(),document.hidden&&!In.immediateModify?function(e){const t=Boolean(tr);tr=()=>{document.hidden||(rr(),e(),nr=!0)},t||document.addEventListener("visibilitychange",tr)}(e):e(),function(e){const t=document.querySelector(tn);t?on(t,e):(rn&&rn.disconnect(),rn=new MutationObserver((t=>{e:for(let n=0;n<t.length;n++){const{addedNodes:r}=t[n];for(let t=0;t<r.length;t++){const n=r[t];if(n instanceof HTMLMetaElement&&n.name===en){rn.disconnect(),rn=null,on(n,e);break e}}}})),rn.observe(document.head,{childList:!0}))}(In)}function ar(e){try{if(Array.isArray(e.adoptedStyleSheets)&&e.adoptedStyleSheets.length>0){const t=Mn(e);Dn.push(t),t.render(In,Fn)}}catch(e){}}function sr(){Ln.forEach((e=>e.pause())),n(qn.values(),(e=>e.stop())),qn.clear(),xn(),zt.forEach((e=>e.disconnect())),Qt.forEach((e=>e.disconnect())),zt.clear(),Qt.clear(),h(Jn),m.clear()}function ir(){if(document.querySelector('meta[name="darkreader-lock"]'))return!0;const e=document.querySelector('meta[name="darkreader"]');return e?e.content!==Rn:(function(){const e=document.createElement("meta");e.name="darkreader",e.content=Rn,document.head.appendChild(e)}(),er=new MutationObserver((()=>{document.querySelector('meta[name="darkreader-lock"]')&&(er.disconnect(),lr())})),er.observe(document.head,{childList:!0,subtree:!0}),!1)}function cr(e,t,n){if(In=e,Nn=t,Nn?(Fn=Array.isArray(Nn.ignoreImageAnalysis)?Nn.ignoreImageAnalysis:[],Bn=Array.isArray(Nn.ignoreInlineStyle)?Nn.ignoreInlineStyle:[]):(Fn=[],Bn=[]),In.immediateModify&&(l=()=>!0),Pn=n,document.head){if(ir())return;document.documentElement.setAttribute("data-darkreader-mode","dynamic"),document.documentElement.setAttribute("data-darkreader-scheme",In.mode?"dark":"dimmed"),or()}else{if(!ne){const e=On("darkreader--fallback");document.documentElement.appendChild(e),e.textContent=pt(In,{strict:!0})}const e=new MutationObserver((()=>{if(document.head){if(e.disconnect(),ir())return void lr();or()}}));e.observe(document,{childList:!0,subtree:!0})}}function lr(){document.documentElement.removeAttribute("data-darkreader-mode"),document.documentElement.removeAttribute("data-darkreader-scheme"),ur(),s(document.querySelector(".darkreader--fallback")),document.head&&(!function(){rn&&(rn.disconnect(),rn=null);const e=document.querySelector(tn);e&&nn&&(e.content=nn)}(),s(document.head.querySelector(".darkreader--user-agent")),s(document.head.querySelector(".darkreader--text")),s(document.head.querySelector(".darkreader--invert")),s(document.head.querySelector(".darkreader--inline")),s(document.head.querySelector(".darkreader--override")),s(document.head.querySelector(".darkreader--variables")),s(document.head.querySelector(".darkreader--root-vars")),s(document.head.querySelector('meta[name="darkreader"]')),document.dispatchEvent(new CustomEvent("__darkreader__cleanUp")),s(document.head.querySelector(".darkreader--proxy"))),Un.forEach((e=>{s(e.querySelector(".darkreader--inline")),s(e.querySelector(".darkreader--override"))})),Un.clear(),n(Ln.keys(),(e=>Xn(e))),Qn.clear(),pn.clear(),n(document.querySelectorAll(".darkreader"),s),Dn.forEach((e=>{e.destroy()})),Dn.splice(0),er&&er.disconnect()}function ur(){wt.clear(),ce.clear(),rr(),Zn(),sr(),St(),A.clear(),x.clear()}let dr=null;const hr=({matches:e})=>fr.forEach((t=>t(e))),fr=new Set;const mr=()=>(dr||matchMedia("(prefers-color-scheme: dark)")).matches,pr=/url\(\"(blob\:.*?)\"\)/g;async function gr(){const e=[];function t(t,n){const r=document.querySelector(t);r&&r.textContent&&(e.push(`/* ${n} */`),e.push(r.textContent),e.push(""))}t(".darkreader--fallback","Fallback Style"),t(".darkreader--user-agent","User-Agent Style"),t(".darkreader--text","Text Style"),t(".darkreader--invert","Invert Style"),t(".darkreader--variables","Variables Style");const r=[];if(document.querySelectorAll(".darkreader--sync").forEach((e=>{n(e.sheet.cssRules,(e=>{e&&e.cssText&&r.push(e.cssText)}))})),r.length){const t=function(e){function t(e){return e.replace(/^\s+/,"")}function n(e){return 0===e?"":" ".repeat(4*e)}if(e.length<5e4){const t=/[^{}]+{\s*}/;for(;t.test(e);)e=e.replace(t,"")}const r=e.replace(/\s{2,}/g," ").replace(/\{/g,"{\n").replace(/\}/g,"\n}\n").replace(/\;(?![^\(|\"]*(\)|\"))/g,";\n").replace(/\,(?![^\(|\"]*(\)|\"))/g,",\n").replace(/\n\s*\n/g,"\n").split("\n");let o=0;const a=[];for(let e=0,s=r.length;e<s;e++){const s=`${r[e]}\n`;s.includes("{")?a.push(n(o++)+t(s)):s.includes("}")?a.push(n(--o)+t(s)):a.push(n(o)+t(s))}return a.join("").trim()}(r.join("\n"));e.push("/* Modified CSS */"),e.push(await async function(e){const t=[];T(pr,e,1).forEach((e=>{const n=Xe(e);t.push(n)}));const n=await Promise.all(t);return e.replace(pr,(()=>`url("${n.shift()}")`))}(t)),e.push("")}return t(".darkreader--override","Override Style"),e.join("\n")}let br=!1;function yr(){br=!0,removeEventListener("pagehide",Sr),removeEventListener("freeze",wr),removeEventListener("resume",vr),ur(),Y(),dr&&hr&&(oe?dr.removeEventListener("change",hr):dr.removeListener(hr),fr.clear(),dr=null)}function kr(e){if(br)return;const t=e=>{"unsupportedSender"===e&&(E(),S(),lr(),yr())};try{chrome.runtime.sendMessage(e,t)}catch(e){"Extension context invalidated."===e.message&&yr()}}var Er;function Sr(t){!1===t.persisted&&kr({type:e.CS_FRAME_FORGET})}function wr(){kr({type:e.CS_FRAME_FREEZE})}function vr(){kr({type:e.CS_FRAME_RESUME,data:{isDark:mr()}})}function Cr(){kr({type:e.CS_DARK_THEME_DETECTED})}Er=t=>kr({type:e.CS_COLOR_SCHEME_CHANGE,data:{isDark:t}}),fr.add(Er),dr||(dr=matchMedia("(prefers-color-scheme: dark)"),oe?dr.addEventListener("change",hr):dr.addListener(hr)),chrome.runtime.onMessage.addListener((function({type:t,data:n}){switch(t){case e.BG_ADD_CSS_FILTER:case e.BG_ADD_STATIC_THEME:{const{css:r,detectDarkTheme:o}=n;lr(),k(r,t===e.BG_ADD_STATIC_THEME?"static":"filter"),o&&X((e=>{e&&(E(),Cr())}));break}case e.BG_ADD_SVG_FILTER:{const{css:e,svgMatrix:t,svgReverseMatrix:r,detectDarkTheme:o}=n;lr(),function(e,t){a({selectNode:()=>document.getElementById("dark-reader-svg"),createNode:n=>{const r="http://www.w3.org/2000/svg",o=(e,t)=>{const n=document.createElementNS(r,"filter");return n.id=e,n.style.colorInterpolationFilters="sRGB",n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","99999"),n.setAttribute("height","99999"),n.appendChild(a(t)),n},a=e=>{const t=document.createElementNS(r,"feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("values",e),t},s=document.createElementNS(r,"svg");s.id="dark-reader-svg",s.style.height="0",s.style.width="0",s.appendChild(o("dark-reader-filter",e)),s.appendChild(o("dark-reader-reverse-filter",t)),n.appendChild(s)},updateNode:t=>{const n=t.firstChild.firstChild;if(n.getAttribute("values")!==e){n.setAttribute("values",e);const t=document.getElementById("dark-reader-style"),r=t.textContent;t.textContent="",t.textContent=r}},selectTarget:()=>document.head,createTarget:()=>{const e=document.createElement("head");return document.documentElement.insertBefore(e,document.documentElement.firstElementChild),e},isTargetMutation:e=>"head"===e.target.nodeName.toLowerCase()})}(t,r),k(e,"filter"),o&&X((e=>{e&&(E(),S(),Cr())}));break}case e.BG_ADD_DYNAMIC_THEME:{const{theme:e,fixes:t,isIFrame:r,detectDarkTheme:o}=n;E(),cr(e,t,r),o&&X((e=>{e&&(lr(),Cr())}));break}case e.BG_EXPORT_CSS:gr().then((t=>kr({type:e.CS_EXPORT_CSS_RESPONSE,data:t})));break;case e.BG_UNSUPPORTED_SENDER:case e.BG_CLEAN_UP:E(),S(),lr(),Y();break;case e.BG_RELOAD:yr()}})),kr({type:e.CS_FRAME_CONNECT,data:{isDark:mr()}}),chrome.runtime.onMessage.addListener((t=>{"bg_unsuspend"===t.action&&kr({type:e.CS_FRAME_CONNECT,data:{isDark:mr()}})})),addEventListener("pagehide",Sr),addEventListener("freeze",wr),addEventListener("resume",vr)}();